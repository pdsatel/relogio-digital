#include <LiquidCrystal.h>


#define BUTTON 2
#define BUTTON2 12
#define BUTTON3 11

#define RS 7
#define E 6
#define DB4 4
#define DB5 5
#define DB6 10
#define DB7 11

LiquidCrystal tela (RS, E, DB4, DB5, DB6, DB7);

int sec = 0;
int minut = 0;
int hour = 0;
volatile bool flag = false;


void setup() {
  tela.begin(16, 2);
  pinMode(BUTTON, INPUT_PULLUP);
  pinMode(BUTTON2, INPUT_PULLUP);
  pinMode(BUTTON3, INPUT_PULLUP);
  attachInterrupt(digitalPinToInterrupt(BUTTON), isr, FALLING);
}
void isr() {
  flag = true;
}
void zeros(int A1, int A2, int A3) {
  if (A1 < 10) {
    tela.setCursor(0, 1);
    tela.print(0);
    tela.setCursor(1, 1);
    tela.print(A1);
  }

  if (A1 > 9) {
    tela.setCursor(0, 1);
    tela.print(A1);
  }

  if (A2 < 10) {
    tela.setCursor(3, 1);
    tela.print(0);
    tela.setCursor(4, 1);
    tela.print(A2);
  }

  if (A2 > 9) {
    tela.setCursor(3, 1);
    tela.print(A2);
  }
  if (A3 < 9) {
    tela.setCursor(6, 1);
    tela.print(0);
    tela.setCursor(7, 1);
    tela.print(A3);
  }


  if (A3 > 9) {
    tela.setCursor(6, 1);
    tela.print(A3);
    
  }
}
 
void cronometro(){
  
  
 for (hour = 0; hour < 60; hour++) {
   for (minut = 0; minut < 60; minut++) {
     for (sec = 0; sec < 60; sec++) {
      zeros(hour,minut,sec);
      delay(10);
      tela.setCursor(0, 0);
      tela.print("Cronometro :");
      tela.setCursor(2, 1);
      tela.print(":");
      tela.setCursor(5, 1);
      tela.print(":");
      if  (flag == true){
        flag=false;
	    tela.clear();
        relogio();
 } 
}

       
    }
  }
 }
  
  
void relogio() {
  int estadoBT = digitalRead(BUTTON);
  int estadoBT2 = digitalRead(BUTTON2);
  int estadoBT3 = digitalRead(BUTTON3);

  for (hour = 0; hour < 60; hour++) {
    if (hour < 10) {
      tela.setCursor(0, 1);
      tela.print(0);
      tela.setCursor(1, 1);
      tela.print(hour);
    }

    if (hour > 9) {
      tela.setCursor(0, 1);
      tela.print(hour);
    }


    for (minut = 0; minut < 60; minut++) {
      if (minut < 10) {
        tela.setCursor(3, 1);
        tela.print(0);
        tela.setCursor(4, 1);
        tela.print(minut);
      }

      if (minut > 9) {
        tela.setCursor(3, 1);
        tela.print(minut);
      }


      for (sec = 0; sec < 60; sec++) {
        if (sec < 9) {
          tela.setCursor(6, 1);
          tela.print(0);
          tela.setCursor(7, 1);
          tela.print(sec);
        }


        if (sec > 9) {
          tela.setCursor(6, 1);
          tela.print(sec);
        }
        if (flag == true) {
          flag = false;
          tela.clear();
          cronometro();
        }



        delay(100);
        tela.setCursor(0, 0);
        tela.print("Horario :");
        tela.setCursor(2, 1);
        tela.print(":");
        tela.setCursor(5, 1);
        tela.print(":");
      }
    }
  }
}
void loop () {
  relogio();
}
